 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 1 - 1/17/2011 21:30:51


       1/       0 :                     
       2/       0 :                     ;LAST UPDATE: 15.01.2011 savelij
       3/       0 :                     
       4/       0 :                     		include macros.a80
(1)    1/       0 :                     
(1)    2/       0 :                     		RELAXED ON
(1)    3/       0 :                     		CPU Z80UNDOC
(1)    4/       0 :                     
(1)    5/       0 :                     DZ		MACRO DEFZ
(1)    6/       0 :                     		DB DEFZ,0
(1)    7/       0 :                     		ENDM 
(1)    8/       0 :                     
(1)    9/       0 :                     DC		MACRO DEFC
(1)   10/       0 :                     		IF STRLEN(DEFC)>1
(1)   11/       0 :                     		DB SUBSTR(DEFC,0,STRLEN(DEFC)-1)
(1)   12/       0 :                     		ENDIF
(1)   13/       0 :                     		IF STRLEN(DEFC)>0
(1)   14/       0 :                     		DB CHARFROMSTR(DEFC,STRLEN(DEFC)-1)|80H
(1)   15/       0 :                     		ENDIF
(1)   16/       0 :                     		ENDM
(1)   17/       0 :                     
(1)   18/       0 :                     SUM_HOB		MACRO STR,AA,BB,CC
(1)   19/       0 :                     		DB STR
(1)   20/       0 :                     		DW AA
(1)   21/       0 :                     		DW BB
(1)   22/       0 :                     		DW CC
(1)   23/       0 :                     $$I := 0
(1)   24/       0 :                     $$S := 0
(1)   25/       0 :                     		REPT 9
(1)   26/       0 :                     $$N := CHARFROMSTR (STR,STRLEN(STR)+$$S-9)
(1)   27/       0 :                     $$I := $$I+$$N+($$N*256)
(1)   28/       0 :                     $$S := $$S+1
(1)   29/       0 :                     		ENDM
(1)   30/       0 :                     $$I := ($$I+(AA&0XFF)+((AA&0XFF)*256)+(AA>>8)+((AA>>8)*256))&0XFFFF
(1)   31/       0 :                     $$I := ($$I+(BB&0XFF)+((BB&0XFF)*256)+(BB>>8)+((BB>>8)*256))&0XFFFF
(1)   32/       0 :                     $$I := ($$I+(CC&0XFF)+((CC&0XFF)*256)+(CC>>8)+((CC>>8)*256))&0XFFFF
(1)   33/       0 :                     $$I := ($$I+105)&0XFFFF
(1)   34/       0 :                     		DW $$I
(1)   35/       0 :                     		ENDM
(1)   36/       0 :                     
(1)   37/       0 :                     DUPL		MACRO LEN,FILL
(1)   38/       0 :                     DUPL:
(1)   39/       0 :                     $$N		EQU (LEN) / 1024
(1)   40/       0 :                     $$M		EQU (LEN) # 1024
(1)   41/       0 :                     		REPT $$N
(1)   42/       0 :                     		DB 1024 DUP(FILL)
(1)   43/       0 :                     		ENDM
(1)   44/       0 :                     		IF $$M <> 0
(1)   45/       0 :                     		DB $$M DUP(FILL)
(1)   46/       0 :                     		ENDIF
(1)   47/       0 :                     		ENDM
(1)   48/       0 :                     
(1)   49/       0 :                     HIGH		FUNCTION X,((X >> 8) & 0XFF)
(1)   50/       0 :                     LOW		FUNCTION X,(X & 0XFF)
(1)   51/       0 :                     
       5/       0 :                     		CPU Z180
       6/       0 :                     
       7/       0 : =FH                 DD		EQU 15
       8/       0 : =1H                 MM		EQU 1
       9/       0 : =BH                 YY		EQU 11
 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 2 - 1/17/2011 21:30:51


      10/       0 : =962FH              DATA		EQU DD+MM<<5+YY<<9+0X8000
      11/       0 :                     
      12/       0 : =0H                 LOADER_PAGE	EQU 0
      13/       0 : =1H                 MAINROM_PAGE	EQU 1
      14/       0 : =7H                 FPGA_PAGE	EQU 7
      15/       0 :                     
      16/       0 :                     		ORG 0
      17/       0 : 38 00               HEADER		DW EHEADER-HEADER
      18/       2 : 4E 47 53 46         		DB "NGSF"
      19/       6 : 2F 96               		DW DATA
      20/       8 :                     
      21/       8 :                     ;BLOK0
      22/       8 : 00 38 00 00         		DD BLOK0*0X100+LOADER_PAGE
      23/       C : 0A 09               		DW BLOK1-BLOK0
      24/       E :                     		binclude loader.crc
      25/      10 : 4C 4F 41 44 45 52   		DB "LOADER"
      26/      16 : 2F 96               		DW DATA
      27/      18 :                     
      28/      18 :                     ;BLOK1		
      29/      18 : 01 42 09 00         		DD BLOK1*0X100+MAINROM_PAGE
      30/      1C : 00 80               		DW BLOK7-BLOK1
      31/      1E :                     		binclude neogs.crc
      32/      20 : 4D 41 49 4E 20 20   		DB "MAIN  "
      33/      26 : 2F 96               		DW DATA
      34/      28 :                     
      35/      28 :                     ;BLOK7
      36/      28 : 07 42 89 00         		DD BLOK7*0X100+FPGA_PAGE
      37/      2C : 02 44               		DW BLOKE-BLOK7
      38/      2E :                     		binclude fpga.crc
      39/      30 : 46 50 47 41 20 20   		DB "FPGA  "
      40/      36 : 2F 96               		DW DATA
      41/      38 :                     EHEADER
      42/      38 :                     
      43/      38 :                     BLOK0		binclude loader_ngs.rom
      44/     942 :                     BLOK1		binclude neogs.rom
      45/    8942 :                     BLOK7		binclude fpga.bin
      46/    CD44 :                     BLOKE
      47/    CD44 :                     
 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 3 - 1/17/2011 21:30:51


  symbol table (* = unused):
  ------------------------

*ARCHITECTURE :  i386-unknown-win32 - | *BIGENDIAN :                      0 - |
 BLOK0 :                         38 C |  BLOK1 :                        942 C |
 BLOK7 :                       8942 C |  BLOKE :                       CD44 C |
*BRANCHEXT :                      0 - | *CASESENSITIVE :                  1 - |
*CONSTPI :        3.141592653589793 - |  DATA :                        962F - |
*DATE :                   1/17/2011 - |  DD :                             F - |
 EHEADER :                       38 C | *FALSE :                          0 - |
 FPGA_PAGE :                      7 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASDSP :                         0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
 HEADER :                         0 C | *INEXTMODE :                      0 - |
*INLWORDMODE :                    0 - | *INMAXMODE :                      0 - |
*INSRCMODE :                      0 - | *INSUPMODE :                      0 - |
*LISTON :                         1 - |  LOADER_PAGE :                    0 - |
*MACEXP :                         1 - |  MAINROM_PAGE :                   1 - |
 MM :                             1 - | *MOMCPU :                       180 - |
*MOMCPUNAME :                  Z180 - | *NESTMAX :                      100 - |
*PACKING :                        0 - | *PADDING :                        1 - |
*RELAXED :                        1 - | *TIME :                    21:30:51 - |
*TRUE :                           1 - | *VERSION :                     142F - |
 YY :                             B - |

     41 symbols
     28 unused symbols

 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 4 - 1/17/2011 21:30:51


  defined macros:
  ---------------

DC                                    | DUPL                                 
DZ                                    | SUM_HOB                              

      4 macros

 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 5 - 1/17/2011 21:30:51


  defined functions:
  ------------------

LOW                                   | HIGH                                 

 AS V1.42 Beta [Bld 78] - source file create_update.a80 - page 6 - 1/17/2011 21:30:51


  codepages:
  ----------

STANDARD (0 changed characters)


0.04 seconds assembly time

     98 lines source file
      2 passes
      0 errors
      0 warnings
